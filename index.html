<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MAXAPP | Elite Performance</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        :root {
            --accent: #7C3AED;
            --accent-glow: rgba(124, 58, 237, 0.5);
            --bg: #08080F;
            --bg-card: #0F0F1A;
            --border: #1E1E35;
            --text: #F0F0FF;
            --muted: #7070A0;
            --error: #FF4D4D;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        body { 
            background: var(--bg); 
            color: var(--text); 
            font-family: 'DM Sans', sans-serif; 
            height: 100vh; 
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .screen.active { display: flex; }
    </style>
</head>
<body>

    <div id="screen-auth" class="screen active">
        <div class="logo-area">
            <div class="logo-m">M</div>
            <h1 class="title">MAXAPP</h1>
        </div>
        <div class="auth-tabs">
            <div id="tab-login" class="tab active" onclick="toggleAuthMode(true)">LOGIN</div>
            <div id="tab-signup" class="tab" onclick="toggleAuthMode(false)">SIGN UP</div>
        </div>
        <input type="email" id="auth-email" placeholder="Email">
        <input type="password" id="auth-pass" placeholder="Password">
        <button class="btn-primary" id="auth-btn" onclick="processAuth()">LOGIN</button>
        <p id="auth-error" style="color:var(--error); font-size:12px; text-align:center; margin-top:15px;"></p>
    </div>

    <script>
        const CONFIG = {
            SB_URL: "https://njulviuanxgyvrkwwwfi.supabase.co",
            SB_KEY: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5qdWx2aXVhbnhneXZya3d3d2ZpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMDEwNDgsImV4cCI6MjA4Njg3NzA0OH0.Y7g2RNsnM68Phv6yB7ZrXjJljW88LTUzuiqveDzW6G4",
        };

        let supabase;
        let isLogin = true;

        window.onload = () => {
            try {
                if (window.supabase) {
                    supabase = window.supabase.createClient(CONFIG.SB_URL, CONFIG.SB_KEY);
                    console.log("System Online");
                } else {
                    console.error("Supabase library not loaded.");
                }
            } catch (e) {
                console.error("Initialization error: ", e);
            }
        };

        function toggleAuthMode(mode) {
            isLogin = mode;
            document.getElementById('tab-login').classList.toggle('active', mode);
            document.getElementById('tab-signup').classList.toggle('active', !mode);
            document.getElementById('auth-btn').innerText = mode ? "LOGIN" : "SIGN UP";
        }

        async function processAuth() {
            const email = document.getElementById('auth-email').value;
            const pass = document.getElementById('auth-pass').value;
            const err = document.getElementById('auth-error');
            
            if (!email || !pass) {
                err.innerText = "Email and password are required!";
                return;
            }

            err.innerText = "Synchronizing...";
            try {
                let res = isLogin 
                    ? await supabase.auth.signInWithPassword({ email, password: pass })
                    : await supabase.auth.signUp({ email, password: pass });

                if (res.error) {
                    throw res.error;
                }

                console.log("Authentication successful", res);
                err.innerText = ""; // Clear errors
            } catch (e) {
                console.error("Authentication error: ", e);
                err.innerText = e.message || "An unknown error occurred.";
            }
        }
    </script>
</body>
</html>